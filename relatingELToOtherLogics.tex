
\section{Relating EL to Propositional Logic and Hennessy-Milner Logic}

\subsection{Comparing \ELABR{} with Hennessy-Milner Logic}

Section \ref{standardTranslation} investigated the relationship
between \ELABR{} and first-order logic. Now we compare \ELABR{} with a
logic that is much closer in spirit: Hennessy-Milner logic
\cite{HennessyM:alglawfndac}, a modal logic designed to reason about
process calculi. Indeed the present shape of \ELABR{} owes to
Hennessy-Milner logic. We now contrast both by translation from
\ELABR{} into Hennessy-Milner logic \martin{why not the other way?}.
This will reveal more clearly than the translation into first-order
logic where \ELABR{} is novel.

Given a set $\Sigma$ of symbols, with $s$ ranging over
$\Sigma$, the \emph{formulae} of Hennessy-Milner logic are given
by the following grammar:
\begin{GRAMMAR}
  \phi 
     &\quad ::= \quad & 
  \top \fOr \phi_1 \AND \phi_2 \fOr \langle s \rangle \phi \fOr \neg \phi 
\end{GRAMMAR}

\NI Note that many presentations use infinite conjunction. However,
that's not required in the present context.

 \emph{Models} of Hennessy-Milner logic are pairs $(\LLL, s)$ where
 $\LLL = (S, \rightarrow)$ is a labelled transition system over
 $\Sigma$, and $s \in S$.  The \emph{satisfaction relation} $(\LLL, s)
 \models \phi$ is given by the following inductive clauses.

\[
\begin{array}{lclcl}
  (\LLL, s) 
     & \models & 
  \top  \\
  (\LLL, s) 
     & \models & 
  \phi_1 \AND \phi_2 &\  \mbox{ iff }\  & (\LLL, s)  \models \phi_1 \mbox { and } (\LLL, s) \models \phi_2  \\
  (\LLL, s) 
     & \models & 
  \langle a \rangle \phi & \mbox{ iff } & \mbox{ there is a } s \xrightarrow{a} s' \mbox { such that } (l,s') \models \phi  \\
  (\LLL, s) 
     & \models & 
  \neg \phi & \mbox{ iff } & (\LLL, s)  \nvDash \phi 
\end{array}
\]

\NI It is not common to require models of Hennessy-Milner logic to be
deterministic, although that restriction can be useful as we see
below.

We can now see the two differences between \ELFULL{}, and
Hennessy-Milner logic, one syntactic, the other semantic.

\begin{itemize}

\item Syntactically, \ELABR{} has the transition-restriction operator ($!$)
  instead of logical negation ($\neg$).

\item Semantically, an \ELABR{} model has an additional state-labelling,
  describing the allowable transitions from each vertex.

\end{itemize}

\NI We translate formulae of \ELABR{} into HML using the function
$t$:

\begin{eqnarray*}
  \SEMB{\top} & \ = \ & \top  \\
  \SEMB{\phi_1 \AND \phi_2} & \ = \ & \SEMB{\phi_1} \AND \SEMB{\phi_2}  \\
  \SEMB{\langle a \rangle \phi} & \ = \ & \langle a \rangle \SEMB{\phi}  \\
  \SEMB{! A} & \ = \ & \bigwedge_{a \in \Sigma - A} \neg \langle a \rangle \top 
\end{eqnarray*}

\NI If $\Sigma$ is an infinite set, then the translation of a $!$
formula will be an infinitary formula.  If $\Sigma$ is finite, then
the size of the HML formula will be of the order of $n * | \Sigma |$
larger than the original \ELABR{} formula, where $n$ is the number of
$!$ operators occurring in the \ELABR{} formula). In both logics we
use the number of logical operators as a measure of size.

We can also translate eremic models:
\[
   \SEMB{((S, \rightarrow, \lambda), s)} 
      =
   ((S, \rightarrow), s)
\]
Pure eremic models are already models of Hennessy-Milner logic, so the
translation is trivial $\SEMB{\PPP} = \PPP$. Note that both
translations work for deterministic as well as non-deterministic
models.

We continue with an obvious consequence of the translation.

\begin{theorem}
Let $\MMM$ be a (deterministic or non-deterministic) eremic
  model. Then $\MMM \models \phi$ implies $\SEMB{\MMM} \models
  \SEMB{\phi}$.
\end{theorem}
\begin{proof}
Stringforward by induction on $\phi$.
\end{proof}

\NI The same theorem is also true if we replace eremic by pure eremic
models.



We can now see why in Hennessy-Milner logic without negation $p \equiv
p'$ does \emph{not} entail $p \BISIM p'$

\begin{GRAMMAR}
  \phi 
    &\quad ::= \quad&
  \top \fOr \phi_1 \AND \phi_2  \fOr \langle a \rangle \phi
\end{GRAMMAR}

\input{figure:hml}

\NI Consider Figure \ref{figure:hml}.  Here, $x \equiv x'$ - they both
satisfy the sub formulae of $\langle a \rangle (\langle b \rangle \top
\AND \langle c \rangle \top)$.  But there is no bisimulation between
$x$ and $x'$ ($y_1$ cannot be matched with $y'$ because $y'$ has an
additional outgoing $c$-transition).

If we remove negation, HML is insufficiently expressive to distinguish
between these two non-bisimilar models.  When we restore negation, we
can distinguish between these models via the formula:

\[
   \langle a \rangle \neg \langle c \rangle \top
\]

\NI Similarly, \ELABR{} is able to distinguish between these models via the
formula:

\[
  \langle a \rangle ! \{b\}
\]

\NI \ELABR{}, also, has the expressive capacity to distinguish between
non-bisimilar models. If the LTSs are finitely-branching, it can
simulate negation (in innermost scope) via the width restriction
operator !

\subsection{EL, HML and Propositional Logic}

\richard{TODO: this subsection relies on an understanding of EL [$\land, !, \neg$]  - but this extension is not defined until the Appendices. Things need to be reordered!!!}

\input{figure:relationships}
Consider the following six languages:
\begin{center}
\begin{tabular}{ l | r }
Language & Description \\
\hline
PL[$\land$] & Propositional Logic restricted to the $\land$ operator \\
HML[$\land$] & Hennessy-Milner Logic restricted to the $\land$ operator \\
EL[$\land, !$] & Eremic Logic restricted to the $\land$ and $\fBang$ operators \\
PL [$\land, \neg$] & Full Propositional Logic \\
HML [$\land, \neg$] & Full Hennessy-Milner Logic \\
EL [$\land, !, \neg$] & Full Eremic Logic \\
\end{tabular}
\end{center}
Now the top three languages are simple to the point of triviality. In each case:
\begin{itemize}
\item
There is no facility for expressing disjunction
\item
Every formula that is satisfiable has a simplest satisfying model
\item
There is a simple linear-time decision procedure
\end{itemize}
But there are two ways in which EL[$\land, !$]  is significantly more expressive.

Firstly, EL[$\land, !$], unlike either PL[$\land$] or HML[$\land$] , is expressive enough to be able to distinguish between any two models that are not bisimilar. (See Theorem \ref{hennessymilnertheorem}).

The second way in which EL[$\land, !$] is significantly more expressive than both PL[$\land$] and HML[$\land$] is in its ability to express incompatibility.
No two formulae of PL[$\land$] (or HML[$\land$] ) are incompatible with each other. 
But many pairs of formulae of EL[$\land, !$] are incompatible.
(For example: $\langle a \rangle \top$ and $! []$). 
Because EL[$\land, !$]  is expressive enough to be able to make incompatible claims, it satisfies Brandom's property of {\bf Incompatibility Semantics\footnote{$\INC{p}$ is the set of sets of formulae incompatible with $p$.}}:
\[
p \models q \mbox{ iff } \INC{q} \subseteq \INC{p}
\]
EL[$\land, !$]  is the \emph{only} logic with a linear-time decision procedure that is expressive enough to respect Incompatibility Semantics.

The bottom three language can all be decided in exponential time.
But HML is more expressive than PL, and EL [$\land, !, \neg$]  is more expressive than full HML. 
\begin{proposition}
Full HML  is more expressive than full PL.
\end{proposition}
To see this, fix a PL with the nullary operator $\top$ plus an infinite number of propositional atoms $P_{(i,j)}$, indexed by $i$ and $j$.
Now translate each formula of HML via the rules:
\begin{eqnarray*}
\SEMB{\top}  & = & \top  \\
\SEMB{\phi \land \psi} & = & \SEMB{\phi} \land \SEMB{\psi}  \\
\SEMB{\neg \phi} & = & \neg \SEMB{\phi}   \\
\SEMB{\langle a_i \rangle \phi_j} & = & P_{(i,j)} 
\end{eqnarray*}
Now to show that HML is more expressive, we show that there are formulae $\phi$ and $\psi$ of HML such that
\[
\phi \models_{HML} \psi \mbox{ but } \SEMB{\phi} \nvDash_{PL} \SEMB{\psi}
\]
For example, let $\phi = \langle a \rangle \langle b \rangle \top$ and $\psi = \langle a \rangle \top$.
Clearly, $\phi \models_{HML} \psi$. But $\SEMB{\phi} = P_{(i,j)}$ and $\SEMB{\psi} = P_{(i',j')}$ for some $i,j,i',j'$, and there are no entailments in PL between arbitrary propositional atoms.

\begin{proposition}
EL [$\land, !, \neg$]  is more expressive than full HML
\end{proposition}
Given a background set $\Sigma$ of symbols, the formula $\fBang A$ of EL can be translated into HML as:
\[
\bigwedge_{a \in \Sigma - A} \neg \langle a \rangle \top
\]
But if $\Sigma$ is infinite, then this is an infinitary disjunction.
