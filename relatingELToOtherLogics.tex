
\section{Relating \cathoristic\ to Propositional Logic and Hennessy-Milner Logic}\label{relatingELToOtherLogics}
\martin{we don't do much on propositional logic in this chapter, so title is misleading.
What about merging this section with the next on quantified CL? Or maybe better with the previous
sectino?}

\subsection{Comparing \Cathoristic{} with Hennessy-Milner Logic}

Section \ref{standardTranslation} investigated the relationship
between \cathoristic{} and first-order logic. Now we compare \cathoristic{} with a
logic that is much closer in spirit: Hennessy-Milner logic
\cite{HennessyM:alglawfndac}, a modal logic designed to reason about
process calculi. Indeed the present shape of \cathoristic{} owes much to
Hennessy-Milner logic. We now contrast \cathoristic{} and Hennessy-Milner
logic by translation from the former into the latter.  This will
reveal more clearly than the translation into first-order logic the
novelty of \cathoristic{}.

Given a set $\Sigma$ of symbols, with $s$ ranging over
$\Sigma$, the \emph{formulae} of Hennessy-Milner logic are given
by the following grammar:
\begin{GRAMMAR}
  \phi 
     &\quad ::= \quad & 
  \top \fOr \BIGAND_{i \in I} \phi_i  \fOr \langle s \rangle \phi \fOr \neg \phi 
\end{GRAMMAR}

\NI The index set $I$ in the conjunction can be infinite, and needs to
be for applications in process theory.

 \emph{Models} of Hennessy-Milner logic are simply pairs $(\LLL, s)$
 where $\LLL = (S, \rightarrow)$ is a labelled transition system over
 $\Sigma$, and $s \in S$.  The \emph{satisfaction relation} $(\LLL, s)
 \models \phi$ is given by the following inductive clauses.

\[
\begin{array}{lclcl}
  (\LLL, s) 
     & \models & 
  \top  \\
  (\LLL, s) 
     & \models & 
  \BIGAND_{i \in I} \phi_i  &\  \mbox{ iff }\  & \mbox { for all $i \in I$ }: (\LLL, s) \models \phi_i  \\
  (\LLL, s) 
     & \models & 
  \langle a \rangle \phi & \mbox{ iff } & \mbox{ there is a } s \xrightarrow{a} s' \mbox { such that } (l,s') \models \phi  \\
  (\LLL, s) 
     & \models & 
  \neg \phi & \mbox{ iff } & (\LLL, s)  \nvDash \phi 
\end{array}
\]

\NI We can now see the two differences between \cathoristic{}, and
Hennessy-Milner logic, one syntactic, the other semantic.

\begin{itemize}

\item Syntactically, \cathoristic{} has the tantum operator ($!$) instead of
  logical negation ($\neg$).

\item Semantically, an cathoristic model involves one restriction from
  and one addition to a standard Hennessy-Milner logic labelled transition system. The
  restriction is that all cathoristic model are \emph{deterministic},
  while typcially models of Hennessy-Milner logic are
  nondeterministic, although the semantics makes perfect sense for
  deterministic transistion systems too. The addition is the
  additional state-labelling on cathoristic models, a labelling that
  restricts the allowable transitions emanating from each vertex.

\end{itemize}

\NI We translate formulae of \cathoristic{} into Hennessy-Milner logic using the function
$\SEMB{\cdot}$:

\begin{eqnarray*}
  \SEMB{\top} & \ = \ & \top  \\
  \SEMB{\phi_1 \AND \phi_2} & \ = \ & \SEMB{\phi_1} \AND \SEMB{\phi_2}  \\
  \SEMB{\langle a \rangle \phi} & \ = \ & \langle a \rangle \SEMB{\phi}  \\
  \SEMB{! A} & \ = \ & \bigwedge_{a \in \Sigma \setminus A}\!\!\!\! \neg \langle a \rangle \top 
\end{eqnarray*}

\NI If $\Sigma$ is an infinite set, then the translation of a $!$
formula will be an infinitary formula.  If $\Sigma$ is finite, then
the size of the Hennessy-Milner logic formula will be of the order of $n \cdot | \Sigma |$
larger than the original cathoristic formula, where $n$ is the number of
$!$ operators occurring in the cathoristic formula). In both logics we
use the number of logical operators as a measure of size.

We can also translate cathoristic models by forgetting node labelling:
\[
   \SEMB{((S, \rightarrow, \lambda), s)} 
      =
   ((S, \rightarrow), s)
\]
Pure cathoristic models are already models of Hennessy-Milner logic, so the
translation is trivial $\SEMB{\PPP} = \PPP$. Note that both
translations work for deterministic as well as non-deterministic
models.

We continue with an obvious consequence of the translation.

\begin{theorem}
Let $\MMM$ be a (deterministic or non-deterministic) cathoristic
  model. Then $\MMM \models \phi$ implies $\SEMB{\MMM} \models
  \SEMB{\phi}$.
\end{theorem}
\begin{proof}
Straightforward by induction on $\phi$.
\end{proof}

\NI The same theorem is also true if we replace cathoristic by pure cathoristic
models.

However, note that the following natural extension is \emph{not} true
under the translation above:
\begin{align}
\text{If } \phi \models \psi \text{ then } \SEMB{\phi} \models \SEMB{\psi}
\label{invalidEntailment}
\end{align}
To see this, consider an entailment which relies on determinism, such as
\[
\MAY{a} \MAY{b} \land \MAY{a} \MAY{c} \models \MAY{a} (\MAY{b} \land \MAY{c})
\]

\NI The entailment (\ref{invalidEntailment}) is valid in \cathoristic\ because of
the restriction to deterministic models, but is not valid in
Hennessy-Milner logic, where it is invalidated by any model with two
outgoing $a$ transitions, one of which satisfies $\MAY{b}$ and one of
which satisfies $\MAY{c}$.

We can restore the desired connection between cathoristic implication and
Hennessy-Milner logic implication in two ways. First we can restrict
our attention to deterministic models of Hennessy-Milner logic.  The
second solution is to add a determinism constraint to our
translation. Given a set $\Gamma$ of cathoristic formulae, closed under
sub formulae, that contains actions from the set $A \subseteq \Sigma$,
let the determinism constraint for $\Gamma$ be:
\[
\bigwedge_{a \in A, \phi \in \Gamma, \psi \in \Gamma} \neg \; (\MAY{a} \phi \land \MAY{a} \psi \land \neg \MAY{a} (\phi \land \psi) )
\]
If we add this sentence as part of our translation $\SEMB{\cdot}$, we
do get the desired result that
\[
\text{If } \phi \models \psi \text{ then } \SEMB{\phi} \models \SEMB{\psi}
\]


%% \subsection{Why Hennessy-Milner logic without negation does not satisfy 
%% the Hennessy-Milner theorem}

%% \martin{This subsection is a bit obsolete because we no longer have non-deterministic LTS}

%% We can now see why in Hennessy-Milner logic without negation $p \equiv
%% p'$ does \emph{not} entail $p \BISIM p'$

%% \begin{GRAMMAR}
%%   \phi 
%%     &\quad ::= \quad&
%%   \top \fOr \phi_1 \AND \phi_2  \fOr \langle a \rangle \phi
%% \end{GRAMMAR}

%% \input{figure:hml}

%% \NI Consider Figure \ref{figure:hml}.  Here, $x \equiv x'$ - they both
%% satisfy the sub formulae of $\langle a \rangle (\langle b \rangle \top
%% \AND \langle c \rangle \top)$.  But there is no bisimulation between
%% $x$ and $x'$ ($y_1$ cannot be matched with $y'$ because $y'$ has an
%% additional outgoing $c$-transition).

%% If we remove negation, Hennessy-Milner logic is insufficiently expressive to distinguish
%% between these two non-bisimilar models.  When we restore negation, we
%% can distinguish between these models via the formula:

%% \[
%%    \langle a \rangle \neg \langle c \rangle \top
%% \]

%% \NI Similarly, cathoristic is able to distinguish between these models via the
%% formula:

%% \[
%%   \langle a \rangle ! \{b\}
%% \]

%% \NI cathoristic, also, has the expressive capacity to distinguish between
%% non-bisimilar models. If the LTSs are finitely-branching, it can
%% simulate negation (in innermost scope) via the width restriction
%% operator !

