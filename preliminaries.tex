\section{Mathematical preliminaries}\label{preliminaries}

\NI This section briefly surveys the mathematical background of our
paper.

\begin{definition}
A \emph{partial order} is a pair $(S, \sqsubseteq)$ where $S$ is a
set, and $\sqsubseteq$ is a binary relation on $S$ that is reflexive,
transitive and anti-symmtertic.  Let $T \subseteq S$ and $x \in S$. We
say $x$ is an \emph{upper bound} of $T$ provided $t \sqsubseteq x$ for
all $t \in T$. If in addition $x \sqsubseteq y$ for all upper bounds
$y$ of $T$, we say that $x$ is the \emph{least} upper bound of
$T$. \emph{Lower bounds} and \emph{greatest lower bounds} are defined
mutatis mutandis.  A partial order $(S, \sqsubseteq)$ is a
\emph{complete lattice} if every subset of $S$ has a least upper and a
greatest lower bound. \martin{Is that the right notion of lattice for
  characterising $\SIM$ on models?  If not what is?}
\end{definition}

\begin{definition}
Let $\Sigma$ be a set of \emph{actions}.  A \emph{labelled transition
  system over $\Sigma$} is a pair $(\mathcal{W}, \rightarrow)$ where $\mathcal{W}$ is a
set of \emph{states} and $\rightarrow \subseteq \mathcal{W} \times \Sigma \times
\mathcal{W}$ is the \emph{transition relation}.  We write $x \xrightarrow{a} y$
to abbreviate $(x,a,y) \in \rightarrow$. We let $w, w', x, y,
z, ...$ range over states, $a, a', b, ...$ range over actions and
$\LLL, \LLL', ...$ range over labelled transition systems. We usually
speak of labelled transition systems (LTS) when the set of actions is
clear from the context. If we want to emphasise that the set of
actions is \emph{finite}, we use $A$ instead of $\Sigma$.
\end{definition}

\begin{definition}
Given two labelled transition systems $\LLL_i = (S_i, \rightarrow_i)$
over $\Sigma$ for $i = 1, 2$, a \emph{simulation from $\LLL_1$ to
  $\LLL_2$} is a relation $\RRR \subseteq S_1 \times S_2$ such that
whenever $(s, s') \in \RRR$: if $s \TRANS{a} s'$ then there exists a
transition $t \TRANS{a} t'$ with $(t, t') \in \RRR$.  We write $s \SIM
t$ whenever $(s, t) \in \RRR$ for some simulation $\RRR$.  We say
$\RRR$ is a \emph{bisimulation} if both, $\RRR$ and $\RRR^{-1}$ are
simulations. Here $\RRR^{-1} = \{(y, x)\ |\ (x, y) \in \RRR\}$.  We
say two states $s, s'$ are \emph{bisimilar}, written $s \BISIM s'$ if
there is a bisimulation $\RRR$ with $(s, s') \in \RRR$.
\end{definition}

\begin{definition}
A \emph{first-order signature} is specified by the following data.
 A set of \emph{function symbols} with associated \emph{arities},
i.e.~a positive integer $\#(f)$ for each function symbol $f$;  a
set of \emph{relation symbols} with associated \emph{arities}, i.e.~a
positive integer $\#(R)$ for each relation symbol $R$;  a set of
\emph{constant symbols}.  A signature $\SSS$ with no function symbols
is called a \emph{relational signature}.

Let $\SSS$ be a signature. An \emph{$\SSS$-model} $\CAL{M}$ is an
object with the following components.  A set $U$ called
\emph{universe}.  The members of $U$ are called \emph{elements} of
$\CAL{M}$; an element $c^\CAL{M}$ for each constant $c$; a function
$f^\CAL{M} : U^{\#f} \rightarrow U$ for each function symbol $f$; a
relation $R^\CAL{M} \subseteq U^{\#R}$ for each relation symbol $R$.

The \emph{terms} and \emph{first-order formulae} for $\SSS$ are given
by the following grammar
\begin{GRAMMAR}
  t &\ ::=\ & x \VERTICAL c \VERTICAL f(t_1, ..., t_n) \\
  \phi &::=& t = t' \VERTICAL R(t_1, ..., t_n) \VERTICAL \neg \phi \VERTICAL \phi \AND \psi \VERTICAL \forall x.A
\end{GRAMMAR}

\NI Here $x$ ranges over an infinite set of \emph{variables}, $c$ over
constants, $R$ over $n$-ary relational symbols and $f$ over $n$-ary
function symbols from $\SSS$.  Other logical constructs such as
disjunction or existential quantification are given by de Morgan
duality.

Given an $\SSS$-model $\CAL{M}$, an \emph{environment}, ranged over by
$\sigma$, is a partial function from variables to $\CAL{M}$'s
universe.  We write $x \mapsto u$ for the environment that maps $x$ to
$u$ and is undefined for all other variables. Moreover, if $\sigma, x
\mapsto u$ is the environment that is exactly like $\sigma$, except
that it also maps $x$ to $u$, assuming that $x$ is not in the domain
of $\sigma$.  The \emph{interpretation} $\SEMB{t}_{\CAL{M}, \sigma}$
of a term $t$ w.r.t. $\CAL{M}$ and $\sigma$ is given by the following
clauses, assuming that the domain of $\sigma$ contains all free
variables of $t$:
\begin{itemize}

\item $\SEMB{x}_{\CAL{M}, \sigma} = \sigma(x)$.
\item $\SEMB{c}_{\CAL{M}, \sigma} = c^{\CAL{M}}$.
\item $\SEMB{f(t_1, ..., t_n)}_{\CAL{M}, \sigma} =
  f^{\CAL{M}}(\SEMB{t_1}_{\CAL{M}, \sigma}, ..., \SEMB{t_n}_{\CAL{M},
    \sigma})$.

\end{itemize}

\NI The \emph{satisfaction relation} $\CAL{M} \models_{\sigma} \phi$
is given by the following clauses, this time assuming that the domain
of $\sigma$ contains all free variables of $\phi$:
\begin{itemize}

\item $\CAL{M} \models_{\sigma} t = t'$ iff $\SEMB{t}_{\CAL{M}, \sigma} = \SEMB{t'}_{\CAL{M}, \sigma}$.
\item $\CAL{M} \models_{\sigma} R(t_1, ..., t_n)$ iff
  $R^{\CAL{M}}(\SEMB{t_1}_{\CAL{M}, \sigma}, ..., \SEMB{t_n}_{\CAL{M},
  \sigma})$.
\item $\CAL{M} \models_{\sigma} \neg \phi$ iff $\CAL{M} \not\models_{\sigma} \phi$.
\item $\CAL{M} \models_{\sigma} \phi \AND \psi$ iff $\CAL{M} \models_{\sigma} \phi$ and $\CAL{M} \models_{\sigma} \psi$.
\item $\CAL{M} \models_{\sigma} \forall x.\phi$ iff for all $u$ in the
  universe of $\CAL{M}$ we have $\CAL{M} \models_{\sigma, x \mapsto v} \phi$.

\end{itemize}

\end{definition}

\NI Partial orders are explored in \cite{DaveyBA:intlatao}. For a
fuller account on labelled transition systems, see
e.g.~\cite{SassoneV:modcontac,HennessyM:Algtheop}. Bisimulations are
discussed in great detail in \cite{SangiorgiD:intbisac} and
\cite{EndertonHB:matinttl} is one of many good books on first-order
logic.

